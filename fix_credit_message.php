<?php
// ุงุตูุงุญ ูพุงูโูุง ุฎุทุง ฺฉูุจูุฏ ููุฌูุฏ

// ูุณุฑ ูุงู ุงุตู
$indexFile = __DIR__ . '/text.php';

// ุฎูุงูุฏู ูุญุชูุง ูุงู
$content = file_get_contents($indexFile);

// ูพุฏุง ฺฉุฑุฏู ู ุฌุงฺฏุฒู ูพุชุฑู %s ุจุง ุงูฺฏู ุฌุฏุฏ
$oldPattern = '$textbotlang[\'users\'][\'sell\'][\'None-credit\'] = "๐จ ุฎุทุง ุฏุฑ ููฺฏุงู ูพุฑุฏุงุฎุช ุฑุฎ ุฏุงุฏู ุงุณุช.
๐ ุฏูู ุฎุทุง: ููุฌูุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุดูุง ฺฉุงู ูู ุจุงุดุฏ

๐ฐ ููุฌูุฏ ูุนู ุดูุง: %s ุชููุงู
๐ฒ ูุจูุบ ููุฑุฏ ูุงุฒ: %s ุชููุงู
โ๏ธ ฺฉูุจูุฏ ุงุนุชุจุงุฑ: %s ุชููุงู

โ ุจุฑุง ุดุงุฑฺ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ฺฉ ุงุฒ ุฑูุด ูุง ูพุฑุฏุงุฎุช ุฒุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ";';

$newPattern = '$textbotlang[\'users\'][\'sell\'][\'None-credit\'] = "๐จ ุฎุทุง ุฏุฑ ููฺฏุงู ูพุฑุฏุงุฎุช ุฑุฎ ุฏุงุฏู ุงุณุช.
๐ ุฏูู ุฎุทุง: ููุฌูุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุดูุง ฺฉุงู ูู ุจุงุดุฏ

๐ฐ ููุฌูุฏ ูุนู ุดูุง: " . $user_balance . " ุชููุงู
๐ฒ ูุจูุบ ููุฑุฏ ูุงุฒ: " . $product_price . " ุชููุงู
โ๏ธ ฺฉูุจูุฏ ุงุนุชุจุงุฑ: " . $shortage . " ุชููุงู

โ ุจุฑุง ุดุงุฑฺ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ฺฉ ุงุฒ ุฑูุด ูุง ูพุฑุฏุงุฎุช ุฒุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ";';

// ุฌุงฺฏุฒู ุฏุฑ ูุญุชูุง
$content = str_replace($oldPattern, $newPattern, $content);

// ุฐุฎุฑู ูุงู
if (file_put_contents($indexFile, $content)) {
    echo "ูุงู text.php ุจุง ููููุช ุงุตูุงุญ ุดุฏ.\n";
} else {
    echo "ุฎุทุง ุฏุฑ ุงุตูุงุญ ูุงู text.php\n";
}

// ุงฺฉููู ุงุตูุงุญ ุจุฎุดโูุง ูุฎุชูู index.php
$indexFile = __DIR__ . '/index.php';
$content = file_get_contents($indexFile);

// ูพุฏุง ฺฉุฑุฏู ู ุฌุงฺฏุฒู ุชูุงู ููุงุฑุฏ ุงุณุชูุงุฏู ุงุฒ sprintf ุจุฑุง ูพุงู ุฎุทุง ฺฉูุจูุฏ ููุฌูุฏ
$oldPattern = '$error_message = sprintf($textbotlang[\'users\'][\'sell\'][\'None-credit\'], $user_balance, $product_price, $shortage);';
$newPattern = '$error_message = "๐จ ุฎุทุง ุฏุฑ ููฺฏุงู ูพุฑุฏุงุฎุช ุฑุฎ ุฏุงุฏู ุงุณุช.
๐ ุฏูู ุฎุทุง: ููุฌูุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุดูุง ฺฉุงู ูู ุจุงุดุฏ

๐ฐ ููุฌูุฏ ูุนู ุดูุง: " . $user_balance . " ุชููุงู
๐ฒ ูุจูุบ ููุฑุฏ ูุงุฒ: " . $product_price . " ุชููุงู
โ๏ธ ฺฉูุจูุฏ ุงุนุชุจุงุฑ: " . $shortage . " ุชููุงู

โ ุจุฑุง ุดุงุฑฺ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ฺฉ ุงุฒ ุฑูุด ูุง ูพุฑุฏุงุฎุช ุฒุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ";';

$content = str_replace($oldPattern, $newPattern, $content);

// ุฌุงฺฏุฒู ุจุฑุง ููุงุฑุฏ ุจุง volume_price
$oldPattern = '$error_message = sprintf($textbotlang[\'users\'][\'sell\'][\'None-credit\'], $user_balance, $volume_price, $shortage);';
$newPattern = '$error_message = "๐จ ุฎุทุง ุฏุฑ ููฺฏุงู ูพุฑุฏุงุฎุช ุฑุฎ ุฏุงุฏู ุงุณุช.
๐ ุฏูู ุฎุทุง: ููุฌูุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุดูุง ฺฉุงู ูู ุจุงุดุฏ

๐ฐ ููุฌูุฏ ูุนู ุดูุง: " . $user_balance . " ุชููุงู
๐ฒ ูุจูุบ ููุฑุฏ ูุงุฒ: " . $volume_price . " ุชููุงู
โ๏ธ ฺฉูุจูุฏ ุงุนุชุจุงุฑ: " . $shortage . " ุชููุงู

โ ุจุฑุง ุดุงุฑฺ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ฺฉ ุงุฒ ุฑูุด ูุง ูพุฑุฏุงุฎุช ุฒุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ";';

$content = str_replace($oldPattern, $newPattern, $content);

// ุฌุงฺฏุฒู ุจุฑุง ููุงุฑุฏ ุจุง price_format
$oldPattern = '$error_message = sprintf($textbotlang[\'users\'][\'sell\'][\'None-credit\'], $user_balance, $price_format, $shortage);';
$newPattern = '$error_message = "๐จ ุฎุทุง ุฏุฑ ููฺฏุงู ูพุฑุฏุงุฎุช ุฑุฎ ุฏุงุฏู ุงุณุช.
๐ ุฏูู ุฎุทุง: ููุฌูุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุดูุง ฺฉุงู ูู ุจุงุดุฏ

๐ฐ ููุฌูุฏ ูุนู ุดูุง: " . $user_balance . " ุชููุงู
๐ฒ ูุจูุบ ููุฑุฏ ูุงุฒ: " . $price_format . " ุชููุงู
โ๏ธ ฺฉูุจูุฏ ุงุนุชุจุงุฑ: " . $shortage . " ุชููุงู

โ ุจุฑุง ุดุงุฑฺ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ฺฉ ุงุฒ ุฑูุด ูุง ูพุฑุฏุงุฎุช ุฒุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ";';

$content = str_replace($oldPattern, $newPattern, $content);

// ุฌุงฺฏุฒู ููุงุฑุฏ ุงุณุชูุงุฏู ูุณุชูู ุงุฒ ูุชู ุฎุทุง
$oldPattern = 'sendmessage($from_id, $textbotlang[\'users\'][\'sell\'][\'None-credit\'], $step_payment, \'HTML\');';
$newPattern = '// ูุฑูุช ฺฉุฑุฏู ููุงุฏุฑ ุจุฑุง ููุงุด
        $user_balance = number_format($user[\'Balance\']);
        $product_price = number_format($final_price);
        $shortage = number_format($Balance_prim);
        
        $error_message = "๐จ ุฎุทุง ุฏุฑ ููฺฏุงู ูพุฑุฏุงุฎุช ุฑุฎ ุฏุงุฏู ุงุณุช.
๐ ุฏูู ุฎุทุง: ููุฌูุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุดูุง ฺฉุงู ูู ุจุงุดุฏ

๐ฐ ููุฌูุฏ ูุนู ุดูุง: " . $user_balance . " ุชููุงู
๐ฒ ูุจูุบ ููุฑุฏ ูุงุฒ: " . $product_price . " ุชููุงู
โ๏ธ ฺฉูุจูุฏ ุงุนุชุจุงุฑ: " . $shortage . " ุชููุงู

โ ุจุฑุง ุดุงุฑฺ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ฺฉ ุงุฒ ุฑูุด ูุง ูพุฑุฏุงุฎุช ุฒุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ";
        
        sendmessage($from_id, $error_message, $step_payment, \'HTML\');';

$content = str_replace($oldPattern, $newPattern, $content);

// ุฐุฎุฑู ูุงู
if (file_put_contents($indexFile, $content)) {
    echo "ูุงู index.php ุจุง ููููุช ุงุตูุงุญ ุดุฏ.\n";
} else {
    echo "ุฎุทุง ุฏุฑ ุงุตูุงุญ ูุงู index.php\n";
}

// ุงุตูุงุญ ูุงู cron/index.php
$cronFile = __DIR__ . '/cron/index.php';
if (file_exists($cronFile)) {
    $content = file_get_contents($cronFile);
    
    // ุงุนูุงู ููุงู ุชุบุฑุงุช ุฏุฑ ูุงู cron/index.php
    $content = str_replace(
        '$error_message = sprintf($textbotlang[\'users\'][\'sell\'][\'None-credit\'], $user_balance, $product_price, $shortage);',
        '$error_message = "๐จ ุฎุทุง ุฏุฑ ููฺฏุงู ูพุฑุฏุงุฎุช ุฑุฎ ุฏุงุฏู ุงุณุช.
๐ ุฏูู ุฎุทุง: ููุฌูุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุดูุง ฺฉุงู ูู ุจุงุดุฏ

๐ฐ ููุฌูุฏ ูุนู ุดูุง: " . $user_balance . " ุชููุงู
๐ฒ ูุจูุบ ููุฑุฏ ูุงุฒ: " . $product_price . " ุชููุงู
โ๏ธ ฺฉูุจูุฏ ุงุนุชุจุงุฑ: " . $shortage . " ุชููุงู

โ ุจุฑุง ุดุงุฑฺ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ฺฉ ุงุฒ ุฑูุด ูุง ูพุฑุฏุงุฎุช ุฒุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ";',
        $content
    );
    
    $content = str_replace(
        '$error_message = sprintf($textbotlang[\'users\'][\'sell\'][\'None-credit\'], $user_balance, $volume_price, $shortage);',
        '$error_message = "๐จ ุฎุทุง ุฏุฑ ููฺฏุงู ูพุฑุฏุงุฎุช ุฑุฎ ุฏุงุฏู ุงุณุช.
๐ ุฏูู ุฎุทุง: ููุฌูุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุดูุง ฺฉุงู ูู ุจุงุดุฏ

๐ฐ ููุฌูุฏ ูุนู ุดูุง: " . $user_balance . " ุชููุงู
๐ฒ ูุจูุบ ููุฑุฏ ูุงุฒ: " . $volume_price . " ุชููุงู
โ๏ธ ฺฉูุจูุฏ ุงุนุชุจุงุฑ: " . $shortage . " ุชููุงู

โ ุจุฑุง ุดุงุฑฺ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ฺฉ ุงุฒ ุฑูุด ูุง ูพุฑุฏุงุฎุช ุฒุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ";',
        $content
    );
    
    $content = str_replace(
        '$error_message = sprintf($textbotlang[\'users\'][\'sell\'][\'None-credit\'], $user_balance, $price_format, $shortage);',
        '$error_message = "๐จ ุฎุทุง ุฏุฑ ููฺฏุงู ูพุฑุฏุงุฎุช ุฑุฎ ุฏุงุฏู ุงุณุช.
๐ ุฏูู ุฎุทุง: ููุฌูุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุดูุง ฺฉุงู ูู ุจุงุดุฏ

๐ฐ ููุฌูุฏ ูุนู ุดูุง: " . $user_balance . " ุชููุงู
๐ฒ ูุจูุบ ููุฑุฏ ูุงุฒ: " . $price_format . " ุชููุงู
โ๏ธ ฺฉูุจูุฏ ุงุนุชุจุงุฑ: " . $shortage . " ุชููุงู

โ ุจุฑุง ุดุงุฑฺ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ฺฉ ุงุฒ ุฑูุด ูุง ูพุฑุฏุงุฎุช ุฒุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ";',
        $content
    );
    
    $content = str_replace(
        'sendmessage($from_id, $textbotlang[\'users\'][\'sell\'][\'None-credit\'], $step_payment, \'HTML\');',
        '// ูุฑูุช ฺฉุฑุฏู ููุงุฏุฑ ุจุฑุง ููุงุด
        $user_balance = number_format($user[\'Balance\']);
        $product_price = number_format($final_price);
        $shortage = number_format($Balance_prim);
        
        $error_message = "๐จ ุฎุทุง ุฏุฑ ููฺฏุงู ูพุฑุฏุงุฎุช ุฑุฎ ุฏุงุฏู ุงุณุช.
๐ ุฏูู ุฎุทุง: ููุฌูุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุดูุง ฺฉุงู ูู ุจุงุดุฏ

๐ฐ ููุฌูุฏ ูุนู ุดูุง: " . $user_balance . " ุชููุงู
๐ฒ ูุจูุบ ููุฑุฏ ูุงุฒ: " . $product_price . " ุชููุงู
โ๏ธ ฺฉูุจูุฏ ุงุนุชุจุงุฑ: " . $shortage . " ุชููุงู

โ ุจุฑุง ุดุงุฑฺ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ฺฉ ุงุฒ ุฑูุด ูุง ูพุฑุฏุงุฎุช ุฒุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ";
        
        sendmessage($from_id, $error_message, $step_payment, \'HTML\');',
        $content
    );
    
    // ุฐุฎุฑู ูุงู
    if (file_put_contents($cronFile, $content)) {
        echo "ูุงู cron/index.php ุจุง ููููุช ุงุตูุงุญ ุดุฏ.\n";
    } else {
        echo "ุฎุทุง ุฏุฑ ุงุตูุงุญ ูุงู cron/index.php\n";
    }
} else {
    echo "ูุงู cron/index.php ุงูุช ูุดุฏ.\n";
}

echo "ุนููุงุช ุงุตูุงุญ ูพุงู ุฎุทุง ฺฉูุจูุฏ ููุฌูุฏ ุจุง ููููุช ุงูุฌุงู ุดุฏ.\n"; 